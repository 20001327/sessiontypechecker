[{attribute,1,module,bank},
 {function,6,start,0,
  [{clause,6,[],[],
    [{call,7,
      {atom,7,register},
      [{atom,7,bank},
       {call,7,{atom,7,spawn},[{atom,7,bank},{atom,7,init},{nil,7}]}]}]}]},
 {attribute,9,spec,
  {{init,0},
   [{type,9,'fun',
     [{type,9,product,[]},
      {atom,9,
       '#seller?price<Int>.seller<<.client!pay<Int>.client?card<String>.>>seller.@(seller!ok.End,seller!ko.End)'}]}]}},
 {function,10,init,0,
  [{clause,10,[],[],
    [{'receive',11,
      [{clause,12,
        [{tuple,12,[{atom,12,seller},{atom,12,price},{var,12,'Price'}]}],
        [],
        [{'receive',13,
          [{clause,14,
            [{tuple,14,
              [{atom,14,seller},
               {atom,14,start_delegation},
               {var,14,'Name'},
               {var,14,'From'}]}],
            [],
            [{call,15,{atom,15,unregister},[{var,15,'Name'}]},
             {call,16,{atom,16,unregister},[{atom,16,bank}]},
             {call,17,
              {atom,17,register},
              [{var,17,'Name'},{call,17,{atom,17,self},[]}]},
             {op,18,'!',
              {atom,18,client},
              {tuple,18,[{var,18,'Name'},{atom,18,pay},{var,18,'Price'}]}},
             {'receive',19,
              [{clause,20,
                [{tuple,20,
                  [{atom,20,client},{atom,20,card},{var,20,'CardNumber'}]}],
                [],
                [{call,21,{atom,21,unregister},[{var,21,'Name'}]},
                 {call,22,
                  {atom,22,register},
                  [{var,22,'Name'},{var,22,'From'}]},
                 {call,23,
                  {atom,23,register},
                  [{atom,23,bank},{call,23,{atom,23,self},[]}]},
                 {op,24,'!',
                  {atom,24,seller},
                  {tuple,24,[{atom,24,bank},{atom,24,end_delegation}]}},
                 {'case',25,
                  {op,25,'==',
                   {call,25,{atom,25,length},[{var,25,'CardNumber'}]},
                   {integer,25,16}},
                  [{clause,26,
                    [{atom,26,true}],
                    [],
                    [{op,27,'!',
                      {atom,27,seller},
                      {tuple,27,[{atom,27,bank},{atom,27,ok}]}},
                     {atom,28,'End'}]},
                   {clause,29,
                    [{atom,29,false}],
                    [],
                    [{op,30,'!',
                      {atom,30,seller},
                      {tuple,30,[{atom,30,bank},{atom,30,ko}]}},
                     {atom,31,'End'}]}]}]}]}]}]}]}]}]}]}]
