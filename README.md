# Three Buyer Protocol

In this example we show the simple three-buyer-protocol with delegation, then we get the abstract syntax three 
generated by the erlang compiler and parsing the extracted files with jastadd we want to 
build a typechecker.

Jastadd is a simple modular expression evaluator. It uses several components,
focusing on the use of [JastAdd](http://jastadd.org) system, with AST and aspects definition.
The scanner class is generated by the JFlex scanner generator tool, and the
parser class is generated by the Beaver LALR parser generator tool.

External dependencies are self contained in the `tools` directory, except
for Ant.


By creating new aspects (`.jrag` and `.jadd` files) the translator can be
extended with new functionalities. Furthermore, concrete and abstract syntax
can be extended or modified by editing `.jflex`, `.parser` and `.ast` files
in the `spec` directory.

The Ant `build.xml` reflects the most updated features for all external
packages we use; for example it demonstrates how to use JastAddParser
(Beaver preprocessor) and JastAdd (which have currently no built-in Ant
support).


## Building

Just run

	$ ant build

to build a working jar file in the `jar` directory. then execute by simple java command

    $ java -jar threeBuyer.jar <source-directory>

where <source-directory> have to be replaced with the directory cointaing erlang code. If the directory contains a global file 
annoted session types will be ignored and type checking is done using projected session types.

## Cleaning

Run

	$ ant clean

to clean up the project tree.
If you encounter some problems on Cygwin environment, try to add the `-v` flag.
